(this.webpackJsonpservicemanager=this.webpackJsonpservicemanager||[]).push([[0],{163:function(e,t,a){},183:function(e,t,a){e.exports=a(617)},188:function(e,t,a){},617:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(47),l=a.n(o),s=(a(188),a(17)),c=a(18),i=a(20),u=a(19),m=a(21),h=a(72),d={Auth:{region:"ca-central-1",userPoolId:"ca-central-1_y3i0Krt0j",userPoolWebClientId:"7lp0df6po0f0fjj0qs2h8lqpva"}},p=a(78),C=a(71),E=a(32),v=a(619),f=a(33),b=(n.Component,a(13)),y=a.n(b),g=a(30),w=a.n(g),S=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={jwtToken:"",user:""},e.token(),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"token",value:function(){var e=this;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.awrap(h.a.currentSession().then((function(t){e.state.jwtToken=t.idToken.jwtToken})).catch((function(e){return console.log(e)})));case 2:return t.next=4,y.a.awrap(h.a.currentAuthenticatedUser().then((function(t){e.state.user=t.username})).catch((function(e){return console.log(e)})));case 4:case"end":return t.stop()}}))}}]),t}(n.Component),k=a(39),j=a(623),x="https://".concat("fy9djecyw1",".execute-api.ca-central-1.amazonaws.com/dev"),N=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.handleAuth();var t=a.state.user;console.log(a.state.user);var n=e.target.value;a.setState({newComment:{date:new Date,By:t,text:n}})},a.handleSubmit=function(e){e.preventDefault(),a.addComment(a.props.ServiceID)},a.state={isLoading:!0,newComment:"",user:"",jwtToken:""},a.handleSubmit=a.handleSubmit.bind(Object(k.a)(a)),a.addComment=a.addComment.bind(Object(k.a)(a)),a.handleChange=a.handleChange.bind(Object(k.a)(a)),a.handleAuth=a.handleAuth.bind(Object(k.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"addComment",value:function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.awrap(w.a.post(x+"/service/"+e,{Comments:this.state.newComment},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.state.jwtToken)}}).then((function(e){})).catch((function(e){return console.log(e)})));case 2:console.log(this.state.user),window.location="/results";case 4:case"end":return t.stop()}}),null,this)}},{key:"handleAuth",value:function(){var e;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new S,t.next=3,y.a.awrap(e.token());case 3:this.setState({user:e.state.user,jwtToken:e.state.jwtToken});case 4:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(j.a,{onSubmit:this.handleSubmit},r.a.createElement(j.a.Group,null,r.a.createElement(j.a.Label,null,"Add a Comment:"),r.a.createElement(j.a.Control,{as:"textarea",name:"textarea",rows:"5",cols:"80",onChange:this.handleChange})),r.a.createElement(v.a,{variant:"primary",type:"submit"},"Submit")))}}]),t}(n.Component),P=a(621),I=a(628),O=a(172),D=a.n(O),T=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={key:"AIzaSyDM1anm6wLXg3LsLg33sN2-RaK4soOJYRE",coordinates:a.props.Coordinates,zoom:11},a.handleSearch(e),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleSearch",value:function(e){!0===e&&this.componentWillUnmount()}},{key:"componentWillUnmount",value:function(){console.log("Google maps will be unmount"),clearInterval(this.interval)}},{key:"render",value:function(){return this.handleSearch(this.props.newSearch),r.a.createElement("div",{style:{height:"29vh",width:"100%"}},r.a.createElement(D.a,{bootstrapURLKeys:{key:this.state.key},defaultCenter:this.props.Coordinates,defaultZoom:this.state.zoom}))}}]),t}(n.Component),A=a(105),L=a.n(A),G=a(627),B=a(620),U=a(625),R=a(171),F=a(170);function z(){var e=Object(E.a)(["\n    \n    overflow-y: scroll;\n    height: 200px;\n    \n    "]);return z=function(){return e},e}var M=f.a.div(z()),K=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleFiles=function(e){a.setState({file:e.target.files[0],filename:e.target.files[0].name})},a.handleFileDescription=function(e){a.setState({FileDescription:e.target.value}),console.log(e.target.value)},a.handleFilesSubmit=function(e){a.getSignedUrl(),e.preventDefault()},a.state={file:null,filename:"",UploadUrl:"",FileDescription:"",user:"",jwtToken:"",filesOn:[],DescriptionArray:[],uploadProgress:null},a.handleAuth(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({filesOn:e.url,DescriptionArray:e.descriptionArray})}},{key:"updateProgressBarValue",value:function(e){if(0!==e)return r.a.createElement(G.a,{now:e})}},{key:"getFiles",value:function(){var e=this,t=this.state.filesOn;return t.map((function(a){return r.a.createElement("tr",null,r.a.createElement("td",null,t.indexOf(a)+1),r.a.createElement("td",null,r.a.createElement("a",{href:a},a.split(".com/")[1])),r.a.createElement("td",null,e.state.DescriptionArray[t.indexOf(a)]))}))}},{key:"getSignedUrl",value:function(){var e=this;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(this.state.jwtToken),t.next=3,y.a.awrap(w.a.patch(x+"/item/"+this.props.serviceID+"?item=service&filename="+this.state.filename,{description:this.state.FileDescription},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.state.jwtToken)}}).then((function(t){e.setState({UploadUrl:t.data.Url}),console.log(e.state.UploadUrl),e.UploadFile()})).catch((function(e){console.log(e)})));case 3:case"end":return t.stop()}}),null,this)}},{key:"UploadFile",value:function(){var e=this;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.awrap(w.a.put(this.state.UploadUrl,this.state.file,{onUploadProgress:function(t){t.lengthComputable&&(console.log(t.loaded+" "+t.total),null!==t.total&&e.setState({uploadProgress:Math.round(100*t.loaded/t.total)}))}}).then((function(e){window.location="/results"})).catch((function(e){return console.log(e)})));case 2:case"end":return t.stop()}}),null,this)}},{key:"handleAuth",value:function(){var e;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new S,t.next=3,y.a.awrap(e.token());case 3:this.setState({user:e.state.user,jwtToken:e.state.jwtToken});case 4:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(I.a,null,r.a.createElement(I.a.Header,null,"Archives"),r.a.createElement(I.a.Text,null,r.a.createElement(M,null,r.a.createElement(B.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"File Name"),r.a.createElement("th",null,"Description"))),r.a.createElement("tbody",null,this.getFiles()))," ")))),r.a.createElement("div",null,r.a.createElement(U.a,null,r.a.createElement(I.a,null,r.a.createElement(I.a.Header,null,r.a.createElement(U.a.Toggle,{as:v.a,variant:"link",eventKey:"0"},r.a.createElement(v.a,{variant:"primary",type:"submit"},"Add a file")),this.updateProgressBarValue(this.state.uploadProgress)),r.a.createElement(U.a.Collapse,{eventKey:"0"},r.a.createElement(I.a.Body,null,r.a.createElement(j.a,null,r.a.createElement(j.a.Row,null,r.a.createElement(j.a.Group,{as:R.a,controlId:"FileDescr"},r.a.createElement(j.a.Label,null,"Description"),r.a.createElement(F.a,{name:"Description",type:"text",onChange:this.handleFileDescription})),r.a.createElement(j.a.Group,{as:R.a,controlId:"File"},r.a.createElement(j.a.Label,null,"File to Upload"),r.a.createElement(F.a,{name:"files",type:"file",onChange:this.handleFiles})))),r.a.createElement(U.a.Toggle,{as:v.a,variant:"link",eventKey:"1"},r.a.createElement(v.a,{variant:"primary",type:"submit",onClick:this.handleFilesSubmit},"Upload"))))))))}}]),t}(n.Component),H=a(88),W=a(622),q=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleImput=function(e){a.handleAuth();var t=e.target,n=t.value,r=t.name;a.setState(Object(H.a)({},r,n))},a.handleClose=function(){a.setState({show:!1}),window.location="/results"},a.state={CustomerName:a.props.customer.CustomerName,SiteNumber:a.props.customer.SiteNumber,Address:a.props.customer.Address,City:a.props.customer.City,Province:a.props.customer.Province,PostalCode:a.props.customer.PostalCode,ContactName:a.props.customer.ContactName,Phone:a.props.customer.Phone,CustomerID:a.props.customer.CustomerID,jwtToken:"",user:"",show:!0},a.updateCustomer=a.updateCustomer.bind(Object(k.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleAuth",value:function(){var e;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new S,t.next=3,y.a.awrap(e.token());case 3:this.setState({user:e.state.user,jwtToken:e.state.jwtToken});case 4:case"end":return t.stop()}}),null,this)}},{key:"updateCustomer",value:function(){var e,t=this;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(this.state.jwtToken),e={CustomerName:this.state.CustomerName,SiteNumber:this.state.SiteNumber,Address:this.state.Address,City:this.state.City,Province:this.state.Province,Phone:this.state.Phone,PostalCode:this.state.PostalCode,ContactName:this.state.ContactName,CustomerID:this.state.CustomerID},a.next=4,y.a.awrap(w.a.patch(x+"/customer/"+this.state.CustomerID,e,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.state.jwtToken)}}).then((function(e){t.handleClose()})).catch((function(e){return console.log(e)})));case 4:case"end":return a.stop()}}),null,this)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(W.a,{show:this.state.show,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(W.a.Header,null,r.a.createElement(W.a.Title,{id:"contained-modal-title-vcenter"},"Customer Update")),r.a.createElement(W.a.Body,null,r.a.createElement(j.a.Row,null,r.a.createElement(j.a.Group,{as:R.a,controlId:"CustomerName"},r.a.createElement(j.a.Label,null,"Customer"),r.a.createElement(j.a.Control,{type:"text",placeholder:this.state.CustomerName,onChange:this.handleImput,name:"CustomerName"})),r.a.createElement(j.a.Group,{as:R.a,controlId:"SiteNumber"},r.a.createElement(j.a.Label,null,"Site Number:"),r.a.createElement(j.a.Control,{type:"Site",placeholder:this.state.SiteNumber,onChange:this.handleImput,name:"SiteNumber"}))),r.a.createElement(j.a.Group,{controlId:"Address"},r.a.createElement(j.a.Label,null,"Address"),r.a.createElement(j.a.Control,{placeholder:this.state.Address,onChange:this.handleImput,name:"Address"})),r.a.createElement(j.a.Row,null,r.a.createElement(j.a.Group,{as:R.a,controlId:"City"},r.a.createElement(j.a.Label,null,"City"),r.a.createElement(j.a.Control,{onChange:this.handleImput,name:"City",placeholder:this.state.City})),r.a.createElement(j.a.Group,{as:R.a,controlId:"Province"},r.a.createElement(j.a.Label,null,"Province"),r.a.createElement(j.a.Control,{as:"select",onChange:this.handleImput,name:"Province",placeholder:this.state.Province},r.a.createElement("option",null,"Choose..."),r.a.createElement("option",null,"Alberta"),r.a.createElement("option",null,"British Columbia"))),r.a.createElement(j.a.Group,{as:R.a,controlId:"PostalCode"},r.a.createElement(j.a.Label,null,"Postal Code"),r.a.createElement(j.a.Control,{onChange:this.handleImput,name:"PostalCode",placeholder:this.state.PostalCode}))),r.a.createElement(j.a.Row,null,r.a.createElement(j.a.Group,{as:R.a,controlId:"ContactName"},r.a.createElement(j.a.Label,null,"Contact Name:"),r.a.createElement(j.a.Control,{placeholder:this.state.ContactName,onChange:this.handleImput,name:"ContactName"})),r.a.createElement(j.a.Group,{as:R.a,controlId:"Phone"},r.a.createElement(j.a.Label,null,"Phone:"),r.a.createElement(j.a.Control,{placeholder:this.state.Phone,onChange:this.handleImput,name:"Phone"})))),r.a.createElement(W.a.Footer,null,r.a.createElement(v.a,{onClick:this.updateCustomer},"Update"),r.a.createElement(v.a,{onClick:this.handleClose},"Close"))))}}]),t}(n.Component);function J(){var e=Object(E.a)(["\n    position: absolute;\n    bottom: 25px;\n    left: 50px;\n    font-size: 14px;\n\n    \n "]);return J=function(){return e},e}function V(){var e=Object(E.a)(["\n    width: 700px;\n    height: 400px;\n    margin: 16px ;\n    padding: 10px;\n    text-align: left;\n    position: absolute;\n    bottom: 120px;\n    right: 200px;\n    \n "]);return V=function(){return e},e}function X(){var e=Object(E.a)(["\n    width: 880px;\n    height: 400px;\n    margin: 16px ;\n    word-wrap: break-word;\n    \n    padding: 10px;\n    text-align: left;\n    position: absolute;\n    bottom: 250px;\n    right: 940px;\n    font-size: 1em;\n    overflow: auto;\n "]);return X=function(){return e},e}function Y(){var e=Object(E.a)(["\n    text-align: left;\n    position: absolute;\n    bottom: 550px;\n    right: 140px;\n     \n    "]);return Y=function(){return e},e}function _(){var e=Object(E.a)(["\n    text-align: left;\n    position: absolute;\n    bottom: 600px;\n    right: 470px;\n    word-wrap: break-word;\n     \n    "]);return _=function(){return e},e}function Z(){var e=Object(E.a)(["\n    font-size: 1em;\n    position: absolute;\n    bottom: 692px;\n    left: 40px;\n    "]);return Z=function(){return e},e}function $(){var e=Object(E.a)(["\n    font-size: 1.2em;\n    text-align: right;\n    position: absolute;\n    bottom: 830px;\n    right: 50px;\n    "]);return $=function(){return e},e}function Q(){var e=Object(E.a)([" \n                \n    width: 690px;\n    \n    margin: 16px ;\n    \n    \n    text-align: left;\n    word-wrap: break-word;\n       \n    position: relative; \n                    \n                  \n    "]);return Q=function(){return e},e}var ee=f.a.div(Q()),te=f.a.h1($()),ae=f.a.div(Z()),ne=f.a.div(_()),re=f.a.div(Y()),oe=f.a.div(X()),le=f.a.div(V()),se=f.a.div(J()),ce=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).editButton=function(){a.setState({editCustomer:!0})},a.state={isLoading:!0,ticket:[],Comments:[],CustomerId:"",CustomerName:"",SiteNumber:"",Address:"",City:"",Province:"",PostalCode:"",ContactName:"",Phone:"",zoom:8,Addressfull:"",coordinates:null,newSearch:!1,editCustomer:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleSearch",value:function(){var e=this.props.location.state.searchText;this.getItem(e,"service")}},{key:"componentDidMount",value:function(){this.handleSearch()}},{key:"componentDidUpdate",value:function(e){e.location.state.searchText!==this.props.location.state.searchText&&(this.handleSearch(),this.setState({newSearch:!0}))}},{key:"handleMaprequest",value:function(){return null!==this.state.coordinates?!0===this.state.newSearch?(console.log("new search, reseting google maps"),this.setState({coordinates:null,newSearch:!1}),r.a.createElement("div",null,r.a.createElement(P.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))):(console.log("first search, Starting google maps"),r.a.createElement("div",null,r.a.createElement(T,{Coordinates:this.state.coordinates}))):(console.log("No coordinates "),r.a.createElement("div",null,r.a.createElement(P.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))))}},{key:"handleGeolocation",value:function(){var e=this;this.setState({Addressfull:this.state.Address+" "+this.state.City+" "+this.state.Province+" "+this.state.PostalCode}),L.a.setApiKey("AIzaSyDM1anm6wLXg3LsLg33sN2-RaK4soOJYRE");var t=this.state.Addressfull;L.a.fromAddress(t).then((function(t){var a=t.results[0].geometry.location,n=a.lat,r=a.lng;e.setState({coordinates:{lat:n,lng:r}})})).catch((function(e){console.error(e)}))}},{key:"handleCustomerEdit",value:function(){var e=null;if(this.state.editCustomer)return e={CustomerName:this.state.CustomerName,SiteNumber:this.state.SiteNumber,Address:this.state.Address,City:this.state.City,Province:this.state.Province,Phone:this.state.Phone,PostalCode:this.state.PostalCode,ContactName:this.state.ContactName,CustomerID:this.state.CustomerId},r.a.createElement(q,{customer:e})}},{key:"getItem",value:function(e,t){var a,n=this;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a=new S,r.next=3,y.a.awrap(a.token());case 3:return r.next=5,y.a.awrap(w.a.get(x+"/item/"+e+"?item="+t,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.state.jwtToken)}}).then((function(e){"service"===t?(n.setState({isLoading:!1,ticket:e.data.ticket[0],Comments:e.data.ticket[0].Comments,CustomerId:e.data.ticket[0].CustomerID}),n.getItem(n.state.CustomerId,"customer")):(n.setState({CustomerName:e.data.customer[0].CustomerName,SiteNumber:e.data.customer[0].SiteNumber,Address:e.data.customer[0].Address,City:e.data.customer[0].City,Province:e.data.customer[0].Province,PostalCode:e.data.customer[0].PostalCode,ContactName:e.data.customer[0].ContactName,Phone:e.data.customer[0].Phone}),n.handleGeolocation())})).catch((function(e){console.log(e),alert("No Ticket or Customer has been found"),window.location="/Dashboard"})));case 5:case"end":return r.stop()}}))}},{key:"render",value:function(){var e=this.handleMaprequest(),t=this.handleCustomerEdit(),a=this.state.Comments,n=a.map((function(e){return r.a.createElement("div",{key:a.indexOf[e]},r.a.createElement(ee,null,r.a.createElement(I.a,{style:{width:"50rem"}},r.a.createElement(I.a.Body,null,r.a.createElement(I.a.Title,null,"Date: ",e.date," "),r.a.createElement(I.a.Subtitle,{className:"mb-2 text-muted"},"By: ",e.By),r.a.createElement(I.a.Text,null,e.text)))))}));return r.a.createElement("div",null,r.a.createElement(te,null," Ticket Number: ",this.state.ticket.ServiceID),r.a.createElement(re,null,r.a.createElement(I.a,{style:{width:"20rem"}},e)),r.a.createElement(ne,null,r.a.createElement(I.a,{style:{width:"30rem"}},r.a.createElement(I.a.Body,null,r.a.createElement(I.a.Title,null,this.state.CustomerName," "),r.a.createElement(I.a.Text,null,r.a.createElement("p",null," Site Number: ",this.state.SiteNumber),r.a.createElement("p",null,this.state.Address,"  ",this.state.City,", ",this.state.Province," , ",this.state.PostalCode),r.a.createElement("p",null," Contact: ",this.state.ContactName,",   Phone : ",this.state.Phone)),r.a.createElement(v.a,{variant:"primary",onClick:this.editButton},"edit")))),r.a.createElement(ae,null,r.a.createElement(I.a,{style:{width:"50rem"}},r.a.createElement(I.a.Body,null,r.a.createElement(I.a.Title,null," ",this.state.ticket.Title," "),r.a.createElement(I.a.Text,null,r.a.createElement("p",null,"Description:"),this.state.ticket.Description)))),r.a.createElement(oe,null,r.a.createElement(I.a,null,r.a.createElement(I.a.Header,null,"Comments"),n)),r.a.createElement(le,null,r.a.createElement(K,{url:this.state.ticket.attachmentUrl,descriptionArray:this.state.ticket.fileDescription,serviceID:this.state.ticket.ServiceID})),r.a.createElement(se,null,r.a.createElement(N,{ServiceID:this.state.ticket.ServiceID})),t)}}]),t}(n.Component);function ie(){var e=Object(E.a)([" \n    display: block;            \n    width: 900px;\n    \n    margin: 16px ;\n    border: 1px solid #DCDCDC;\n    box-shadow: 0 2px 3px #ccc;\n    padding: 10px;\n    text-align: left;\n    position: absolute;\n    word-wrap: break-word;\n    right: 500px;\n    overflow: auto;              \n                  "]);return ie=function(){return e},e}var ue=f.a.div(ie()),me=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChk=function(){!1===a.state.chkNewCustomer?a.setState({chkNewCustomer:!0}):a.setState({chkNewCustomer:!1})},a.handleCustomerSubmit=function(e){if(a.state.chkNewCustomer){var t={CustomerName:a.state.CustomerName,SiteNumber:a.state.SiteNumber,Address:a.state.Address,City:a.state.City,Province:a.state.Province,Phone:a.state.Phone,PostalCode:a.state.PostalCode,ContactName:a.state.ContactName};a.createItem(t,"customer"),e.preventDefault()}else a.searchCustomer(a.state.CustomerName),e.preventDefault()},a.handleServiceSubmit=function(e){var t={CustomerID:a.state.CustomerID,Title:a.state.Title,Description:a.state.Description,Status:a.state.Status,PriorityLevel:a.state.PriorityLevel,CreatedBy:a.state.user};a.createItem(t,"service"),e.preventDefault()},a.handleImput=function(e){a.handleAuth();var t=e.target,n=t.value,r=t.name;a.setState(Object(H.a)({},r,n))},a.state={chkNewCustomer:!1,CustomerName:"",SiteNumber:"",Address:"",City:"",Province:"",PostalCode:"",ContactName:"",Phone:"",CustomerID:"",Title:"",Description:"",Status:"",PriorityLevel:"",CreatedBy:"",jwtToken:"",CustomMessage:"",user:"",customerSearchlst:null,modalShow:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleAuth",value:function(){var e;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new S,t.next=3,y.a.awrap(e.token());case 3:this.setState({user:e.state.user,jwtToken:e.state.jwtToken});case 4:case"end":return t.stop()}}),null,this)}},{key:"createItem",value:function(e,t){var a=this;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e),n.next=3,y.a.awrap(w.a.post(x+"/item?item="+t,e,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.state.jwtToken)}}).then((function(e){"customer"===t?(a.setState({CustomerID:e.data.item.CustomerID,CustomMessage:"Customer has been Created."}),console.log(e.data.item.CustomerID)):(console.log(e.data.item.ServiceID),a.setState({CustomMessage:"Service has been Created."}),a.props.history.push({pathname:"/results",state:{searchText:e.data.item.ServiceID}}))})).catch((function(e){alert("Customer not created, it might already exists",e),console.log(e)})));case 3:case"end":return n.stop()}}),null,this)}},{key:"searchCustomer",value:function(e){var t=this;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y.a.awrap(w.a.get(x+"/customername/"+e,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.state.jwtToken)}}).then((function(e){t.setState({customerSearchlst:e.data.customer,modalShow:!0}),console.log(e.data.customer)})).catch((function(e){return console.log(e)})));case 2:case"end":return a.stop()}}),null,this)}},{key:"showCustomerSearch",value:function(){var e=this,t=this.state.customerSearchlst;return t.map((function(a){return r.a.createElement("tr",{className:"clickable-row",onClick:function(){return e.chooseCustomer(a)}},r.a.createElement("td",null,t.indexOf(a)+1),r.a.createElement("td",null,a.CustomerName),r.a.createElement("td",null,a.SiteNumber),r.a.createElement("td",null,a.City),r.a.createElement("td",null,a.Province),r.a.createElement("td",null,a.ContactName),r.a.createElement("td",null,a.Phone))}))}},{key:"chooseCustomer",value:function(e){this.setState({CustomerName:e.CustomerName,SiteNumber:e.SiteNumber,Address:e.SiteNumber,City:e.City,Province:e.Province,PostalCode:e.PostalCode,ContactName:e.ContactName,Phone:e.Phone,CustomerID:e.CustomerID,modalShow:!1,customerSearchlst:null})}},{key:"ModalList",value:function(){var e=this,t=!1;if(this.state.customerSearchlst&&this.state.modalShow)return t=!0,console.log("dentro del if"),r.a.createElement(W.a,{show:t,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(W.a.Header,{closeButton:!0},r.a.createElement(W.a.Title,{id:"contained-modal-title-vcenter"},"Search Result")),r.a.createElement(W.a.Body,null,r.a.createElement(B.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Customer Name"),r.a.createElement("th",null,"Site Number"),r.a.createElement("th",null,"City"),r.a.createElement("th",null,"Province"),r.a.createElement("th",null,"Contact Name"),r.a.createElement("th",null,"Phone"))),r.a.createElement("tbody",null,this.showCustomerSearch()))),r.a.createElement(W.a.Footer,null,r.a.createElement(v.a,{onClick:function(){t=!1,e.setState({modalShow:!1,customerSearchlst:null})}},"Close")))}},{key:"render",value:function(){var e="",t=null;return this.state.chkNewCustomer?(e="Submit",t=r.a.createElement("div",null,r.a.createElement(j.a.Group,{controlId:"Address"},r.a.createElement(j.a.Label,null,"Address"),r.a.createElement(j.a.Control,{placeholder:this.state.Address,onChange:this.handleImput,name:"Address"})),r.a.createElement(j.a.Row,null,r.a.createElement(j.a.Group,{as:R.a,controlId:"City"},r.a.createElement(j.a.Label,null,"City"),r.a.createElement(j.a.Control,{onChange:this.handleImput,name:"City",placeholder:this.state.City})),r.a.createElement(j.a.Group,{as:R.a,controlId:"Province"},r.a.createElement(j.a.Label,null,"Province"),r.a.createElement(j.a.Control,{as:"select",onChange:this.handleImput,name:"Province",placeholder:this.state.Province},r.a.createElement("option",null,"Choose..."),r.a.createElement("option",null,"Alberta"),r.a.createElement("option",null,"British Columbia"))),r.a.createElement(j.a.Group,{as:R.a,controlId:"PostalCode"},r.a.createElement(j.a.Label,null,"Postal Code"),r.a.createElement(j.a.Control,{onChange:this.handleImput,name:"PostalCode",placeholder:this.state.PostalCode}))),r.a.createElement(j.a.Row,null,r.a.createElement(j.a.Group,{as:R.a,controlId:"ContactName"},r.a.createElement(j.a.Label,null,"Contact Name:"),r.a.createElement(j.a.Control,{placeholder:this.state.ContactName,onChange:this.handleImput,name:"ContactName"})),r.a.createElement(j.a.Group,{as:R.a,controlId:"Phone"},r.a.createElement(j.a.Label,null,"Phone:"),r.a.createElement(j.a.Control,{placeholder:this.state.Phone,onChange:this.handleImput,name:"Phone"}))))):e="Search",r.a.createElement("div",null,r.a.createElement(ue,null,r.a.createElement(j.a,{onSubmit:this.handleCustomerSubmit},r.a.createElement(j.a.Row,null,r.a.createElement(j.a.Group,{as:R.a,controlId:"CustomerName"},r.a.createElement(j.a.Label,null,"Customer"),r.a.createElement(j.a.Control,{type:"text",placeholder:this.state.CustomerName,onChange:this.handleImput,name:"CustomerName"})),r.a.createElement(j.a.Group,{as:R.a,controlId:"SiteNumber"},r.a.createElement(j.a.Label,null,"Site Number:"),r.a.createElement(j.a.Control,{type:"Site",placeholder:this.state.SiteNumber,onChange:this.handleImput,name:"SiteNumber"}))),t,r.a.createElement(j.a.Group,{id:"formGridCheckbox"},r.a.createElement(j.a.Check,{type:"checkbox",label:"New Customer",onClick:this.handleChk})),r.a.createElement(v.a,{variant:"primary",type:"submit"},e)),r.a.createElement("div",null," ",this.state.CustomMessage),r.a.createElement("div",null),r.a.createElement(j.a,{onSubmit:this.handleServiceSubmit},r.a.createElement(j.a.Row,null,r.a.createElement(j.a.Group,{as:R.a,controlId:"formGridTtitle"},r.a.createElement(j.a.Label,null,"Title"),r.a.createElement(j.a.Control,{type:"Title",name:"Title",onChange:this.handleImput}))),r.a.createElement(j.a.Row,null,r.a.createElement(j.a.Group,{as:R.a,controlId:"formGridPrioritty"},r.a.createElement(j.a.Label,null,"Priority Level"),r.a.createElement(j.a.Control,{as:"select",name:"PriorityLevel",onChange:this.handleImput},r.a.createElement("option",null,"...Choose"),r.a.createElement("option",null,"Normal (5 days)"),r.a.createElement("option",null,"Level 1 (3 days)"),r.a.createElement("option",null,"Level 2 (next day)"),r.a.createElement("option",null,"Critical Level (5 hours)"))),r.a.createElement(j.a.Group,{as:R.a,controlId:"formGridStatus"},r.a.createElement(j.a.Label,null,"Status"),r.a.createElement(j.a.Control,{as:"select",name:"Status",onChange:this.handleImput},r.a.createElement("option",null,"...Choose"),r.a.createElement("option",null,"Create")))),r.a.createElement(j.a.Group,{controlId:"description"},r.a.createElement(j.a.Label,null,"Description:"),r.a.createElement(j.a.Control,{as:"textarea",rows:"5",placeholder:"Enter a brief description for this ticket",name:"Description",onChange:this.handleImput})),r.a.createElement(v.a,{variant:"primary",type:"submit"},"Create"))),this.ModalList())}}]),t}(n.Component),he=a(55),de=a(626),pe=a(624);a(163);function Ce(){var e=Object(E.a)(["\n    width: 300px;\n    margin: 10px ;\n   "]);return Ce=function(){return e},e}var Ee=f.a.div(Ce()),ve=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={searchText:""},a.handleRoute=function(e){return function(){a.props.history.push({pathname:e})}},a.handleSearchSubmit=function(){a.state.searchText?a.props.history.push({pathname:"/results",state:{searchText:a.state.searchText}}):alert("Please enter a Ticket Number")},a.handleSearchInput=function(e){a.setState({searchText:e.target.value})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(de.a,{bg:"light",variant:"light"},r.a.createElement(de.a.Brand,null,r.a.createElement("a",{href:"http://www.juadel.com"},"SERVICE MANAGER")),r.a.createElement(de.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(de.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(pe.a,{className:"mr-auto"},r.a.createElement(pe.a.Link,{onClick:this.handleRoute("/Dashboard")},"Dashboard"),r.a.createElement(pe.a.Link,{onClick:this.handleRoute("/Services")},"New Service")),r.a.createElement(j.a,{inline:!0},r.a.createElement(F.a,{type:"text",placeholder:"Search",className:"mr-sm-2",value:this.state.searchText,onChange:this.handleSearchInput}),r.a.createElement(v.a,{className:"btn-search",variant:"outline-info",onClick:this.handleSearchSubmit},"Search"))),r.a.createElement(Ee,null,r.a.createElement(C.a,{hideDefault:!0},r.a.createElement(C.b,{inGreeting:function(e){return"Hello "+e}})))),r.a.createElement(he.c,null,r.a.createElement(he.a,{path:"/Dashboard",component:be}),r.a.createElement(he.a,{path:"/Services",component:me}),r.a.createElement(he.a,{path:"/Results",component:ce})))}}]),t}(r.a.Component),fe=Object(he.f)(ve),be=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"j\u03c5adel")}}]),t}(n.Component);h.b.configure(d);var ye=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement(fe,null,r.a.createElement("h1",null,"Hello"))))}}]),t}(n.Component),ge=Object(C.c)(ye,!1);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},95:function(e,t){}},[[183,1,2]]]);
//# sourceMappingURL=main.b1970859.chunk.js.map